<!-- TOC -->

- [正規化の功罪demeritsOfNormalization](#正規化の功罪demeritsOfNormalization)
- [冗長性とパフォーマンスのトレードオフ](#冗長性とパフォーマンスのトレードオフ)

<!-- /TOC -->

#### 正規化の功罪demeritsOfNormalization
- 正規化と検索SQLのパフォーマンスは強いトレードオフの関係にある。

#### 冗長性とパフォーマンスのトレードオフ
- リスク１非正規化は、検索のパフォーマンスは向上させるが更新のパフォーマンスを低下させる
- リスク２データのリアルタイム性（鮮度）を低下させる。
- 後続の工程で設計変更すると、手戻りが大きい。

##### 更新時のパフォーマンス
例えば、「商品数」というサマリデータを追加した「受注」テーブルを考える。<br>
このデータをテーブルに持つためには、当然「受注」テーブルに注文データを登録しておく必要がある。<br>
注文内容というのは一度登録されたら確定ではなく、しばらくの期間は変更が可能なもので、<br>
商品数には増減があり得る。定期的に「受注」テーブルへ「商品数」列の価を反映する更新処理が必要になる。<br>

##### データのリアルタイム性
「商品数」が受注受付後に変更されるのであれば、その変更はどのようなタイミングで反映されるべきか<br>
１日１回、夜間に反映すれば良いのか。それとも３０分に１回、日中でも反映されなければならないのか。<br>
こうした要件は、「商品数」のデータにどの程度の最新性が求められるか、という業務要件とセットで<br>
考える必要がある。<br>

##### 改修コストの大きさ
最後の問題がシステムの改修コストの大きさ。<br>
データモデルの変更は、コードベースの修正に比べて、非常に改修コストが大きくなる。<br>
データのフォーマットがプログラムを決めるDOAの大原則である。<br>
したがって、性能試験をやったところ性能が出なかったのでやっぱりテーブル構成を変更試したい、<br>
と言い出しても、アプリケーションを大きく回収しなければならない、という理由でなかなか受け入れられなかったりする。<br>